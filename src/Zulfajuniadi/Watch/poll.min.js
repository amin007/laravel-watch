!function(){function a(a,b){if(this.bindFunction=function(a,b){return function(){return a.apply(b,[b])}},this.stateChange=function(){4==this.request.readyState&&this.callbackFunction(this.request.responseText)},this.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:!1},this.postBody=arguments[2]||"",this.callbackFunction=b,this.url=a,this.request=this.getRequest(),this.request){var c=this.request;c.onreadystatechange=this.bindFunction(this.stateChange,this),""!==this.postBody?(c.open("POST",a,!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.setRequestHeader("Connection","close")):c.open("GET",a,!0),c.send(this.postBody)}}function g(){c=[],css=[];for(var e,f,g,i,a=document.querySelectorAll("script"),b=document.querySelectorAll("link[href]"),j=0;j<a.length;++j)e=a[j],e.src&&e.src!==d+"/watchpoller.js"&&e.src.indexOf(d)>-1&&(i=e.src.split(d)[1],c.push(i));for(var j=0;j<b.length;++j)f=b[j],f.href&&f.href.indexOf(d)>-1&&(g=f.href.split(d)[1],css.push(g));h()}function h(){setTimeout(function(){var d={timestamp:b,js:c,css:css};if(e)for(var f=e.dataset,g=Object.keys(f),i=0;i<g.length;++i){var j=g[i];d[j]=f[j]}var k=JSON.stringify(d);a("/_watcher?query="+k,function(a){try{a=JSON.parse(a),"RELOAD"===a.do&&window.location.reload(!0)}catch(b){console.error(a)}h()})},f)}var b=(new Date).toISOString(),c=css=[],d=window.location.origin,e=document.getElementById("pollscript"),f=e.dataset.timeout||3e3;console.log("Watcher started. Interval set at: "+f+"ms."),g()}();